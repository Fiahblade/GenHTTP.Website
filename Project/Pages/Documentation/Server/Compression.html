<section class="section-margin">

    <div class="container">

        <div class="row">

            <h2 class="contact-title">Compression</h2>

            <div class="col-12">

                <p>

                    The server will automatically compress content sent to the clients, if applicable. By default,
                    support for <a href="https://www.gzip.org/">gzip</a>.
                    If required, compression can be disabled:

                    <pre><code class="csharp">var server = Server.Create().Router(...).Compression(false);</code></pre>

                </p>

            </div>

        </div>

        <div class="row">

            <h2 class="contact-title">Custom Algorithms</h2>

            <div class="col-12">

                <p>

                    To add a custom compression algorithm to the server, you can implement the
                    <a href="https://github.com/Kaliumhexacyanoferrat/GenHTTP/blob/master/API/GenHTTP.API/Infrastructure/ICompressionAlgorithm.cs">ICompressionAlgorithm</a>
                    interface and register the implementing class with your server builder. For example,
                    support for <a href="https://github.com/google/brotli">Brotli</a> can be added from a .NET Core host, because .NET Standard 2.0
                    does not support Brotli whereas .NET Core does.

                    <pre><code class="csharp">public class BrotliCompression : ICompressionAlgorithm
{

    public string Name => "br";

    public Priority Priority => Priority.High;

    public Stream Compress(Stream content)
    {
        return new FilteredStream(content, (mem) => new BrotliStream(mem, CompressionLevel.Fastest, false));
    }

}
                        
// registration
var server = Server.Create().Router(...).Compression(new BrotliCompression());
</code></pre>

                </p>

            </div>

        </div>

    </div>

</section>
