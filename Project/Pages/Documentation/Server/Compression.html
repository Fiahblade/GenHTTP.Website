<section class="section-margin">

    <div class="container">

        <div class="row">

            <h2 class="contact-title">Compression</h2>

            <div class="col-12">

                <p>

                    The server will automatically compress content sent to the clients, if applicable. By default,
                    <a href="https://www.gzip.org/">gzip</a> and <a href="https://github.com/google/brotli">Brotli</a> are supported.
                    If required, compression can be disabled:

                    <pre><code class="csharp">var server = Server.Create().Router(...).Compression(false);</code></pre>

                </p>

            </div>

        </div>

        <div class="row">

            <h2 class="contact-title">Custom Algorithms</h2>

            <div class="col-12">

                <p>

                    To add a custom compression algorithm to the server, you can implement the
                    <a href="https://github.com/Kaliumhexacyanoferrat/GenHTTP/blob/master/API/GenHTTP.API/Infrastructure/ICompressionAlgorithm.cs">ICompressionAlgorithm</a>
                    interface and register the implementing class with your server builder. For example,
                    the following implementation will add support for the <i>deflate</i> algorithm, which 
                    is not provided by the server out of the box:

                    <pre><code class="csharp">public class DeflateCompression : ICompressionAlgorithm
{

    public string Name => "deflate";

    public Priority Priority => Priority.Low;

    public Stream Compress(Stream content)
    {
        return new FilteredStream(content, (mem) => new DeflateStream(mem, CompressionLevel.Fastest, false));
    }

}
                        
// registration
var server = Server.Create().Router(...).Compression(new DeflateCompression());
</code></pre>

                </p>

            </div>

        </div>

    </div>

</section>
